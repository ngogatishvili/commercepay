{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/commerce--main/client/src/Store.js\",\n    _s = $RefreshSig$();\n\nimport { createContext, useReducer } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Store = /*#__PURE__*/createContext();\nconst initialState = {\n  cart: {\n    cartItems: localStorage.getItem(\"cartItems\") ? JSON.parse(localStorage.getItem(\"cartItems\")) : [],\n    shippingAddress: localStorage.getItem(\"shippingAddress\") ? JSON.parse(localStorage.getItem(\"shippingAddress\")) : {},\n    paymentMethod: localStorage.getItem(\"paymentMethod\") ? JSON.parse(localStorage.getItem(\"paymentMethod\")) : \"\"\n  },\n  userInfo: localStorage.getItem(\"user\") ? JSON.parse(localStorage.getItem(\"user\")) : null\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD_CART_ITEM\":\n      console.log(action.payload);\n      const newItem = action.payload;\n      console.log(newItem);\n      let cartItems = [];\n      const existItem = state.cart.cartItems.find(item => item._id === newItem._id);\n\n      if (existItem) {\n        cartItems = state.cart.cartItems.map(item => {\n          if (item._id === newItem._id) {\n            return item = newItem;\n          } else {\n            return item;\n          }\n        });\n      } else {\n        cartItems = [...state.cart.cartItems, newItem];\n        console.log(cartItems);\n      }\n\n      localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n      return { ...state,\n        cart: { ...state.cart,\n          cartItems\n        }\n      };\n\n    case \"REMOVE_CART_ITEM\":\n      {\n        const cartItems = state.cart.cartItems.filter(item => item._id !== action.payload._id);\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n        return { ...state,\n          cart: { ...state.cart,\n            cartItems\n          }\n        };\n      }\n\n    case \"CART_CLEAR\":\n      return;\n\n    case \"SIGN_USER\":\n      return { ...state,\n        userInfo: action.payload\n      };\n\n    case \"USER_SIGNOUT\":\n      return { ...state,\n        userInfo: null,\n        cart: {\n          cartItems: [],\n          shippingAddress: {},\n          paymentMethod: \"\"\n        }\n      };\n\n    case \"SAVE_SHIPPING_ADDRESS\":\n      return { ...state,\n        cart: { ...state.cart,\n          shippingAddress: action.payload\n        }\n      };\n\n    case \"SAVE_PAYMENT_METHOD\":\n      return { ...state,\n        cart: { ...state.cart,\n          paymentMethod: action.payload\n        }\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const StoreProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const value = {\n    state,\n    dispatch\n  };\n  return /*#__PURE__*/_jsxDEV(Store.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 12\n  }, this);\n};\n\n_s(StoreProvider, \"UrEkDPQH5U12xnblC9PjDJeyoVE=\");\n\n_c = StoreProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoreProvider\");","map":{"version":3,"names":["createContext","useReducer","Store","initialState","cart","cartItems","localStorage","getItem","JSON","parse","shippingAddress","paymentMethod","userInfo","reducer","state","action","type","console","log","payload","newItem","existItem","find","item","_id","map","setItem","stringify","filter","StoreProvider","children","dispatch","value"],"sources":["/home/user/Desktop/commerce--main/client/src/Store.js"],"sourcesContent":["import { createContext,useReducer } from \"react\";\r\n\r\n\r\nexport const Store=createContext();\r\n\r\nconst initialState={\r\n    cart:{\r\n        cartItems:localStorage.getItem(\"cartItems\")? JSON.parse(localStorage.getItem(\"cartItems\")):[],\r\n        shippingAddress:localStorage.getItem(\"shippingAddress\")?JSON.parse(localStorage.getItem(\"shippingAddress\")):{},\r\n        paymentMethod:localStorage.getItem(\"paymentMethod\")?JSON.parse(localStorage.getItem(\"paymentMethod\")):\"\"\r\n\r\n    },\r\n    userInfo:localStorage.getItem(\"user\")? JSON.parse(localStorage.getItem(\"user\")):null\r\n}\r\n\r\nconst reducer=(state,action)=>{\r\n    switch(action.type) {\r\n        case \"ADD_CART_ITEM\":\r\n            console.log(action.payload);\r\n            const newItem=action.payload;\r\n            console.log(newItem);\r\n            let cartItems=[]\r\n            const existItem=state.cart.cartItems.find(item=>item._id===newItem._id);\r\n            if(existItem) {\r\n                 cartItems=state.cart.cartItems.map((item)=>{\r\n                    if(item._id===newItem._id) {\r\n                        return item=newItem;\r\n                    }else{\r\n                    return item;\r\n                    }\r\n                })\r\n            }else{\r\n                cartItems=[...state.cart.cartItems,newItem];\r\n                console.log(cartItems);\r\n            }\r\n            localStorage.setItem(\"cartItems\",JSON.stringify(cartItems));\r\n            return {...state,cart:{...state.cart,cartItems}}\r\n            case \"REMOVE_CART_ITEM\": {\r\n                const cartItems=state.cart.cartItems.filter(item=>item._id!==action.payload._id);\r\n                localStorage.setItem(\"cartItems\",JSON.stringify(cartItems));\r\n                return {...state,cart:{...state.cart,cartItems}}\r\n            }\r\n            case \"CART_CLEAR\":\r\n                return \r\n            case \"SIGN_USER\":\r\n                return {...state,userInfo:action.payload}\r\n            case \"USER_SIGNOUT\":\r\n                return {...state,userInfo:null,cart:{cartItems:[],shippingAddress:{},paymentMethod:\"\"}}\r\n            case \"SAVE_SHIPPING_ADDRESS\":\r\n                return {...state,cart:{...state.cart,shippingAddress:action.payload}}\r\n            case \"SAVE_PAYMENT_METHOD\":\r\n                return {...state,cart:{...state.cart,paymentMethod:action.payload}}\r\n            \r\n               \r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\n\r\nexport const StoreProvider=({children})=>{\r\n           const [state,dispatch]= useReducer(reducer,initialState)\r\n           const value={state,dispatch};\r\n    return <Store.Provider value={value}>{children}</Store.Provider>\r\n}"],"mappings":";;;AAAA,SAASA,aAAT,EAAuBC,UAAvB,QAAyC,OAAzC;;AAGA,OAAO,MAAMC,KAAK,gBAACF,aAAa,EAAzB;AAEP,MAAMG,YAAY,GAAC;EACfC,IAAI,EAAC;IACDC,SAAS,EAACC,YAAY,CAACC,OAAb,CAAqB,WAArB,IAAmCC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CAAnC,GAAiF,EAD1F;IAEDG,eAAe,EAACJ,YAAY,CAACC,OAAb,CAAqB,iBAArB,IAAwCC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAX,CAAxC,GAA4F,EAF3G;IAGDI,aAAa,EAACL,YAAY,CAACC,OAAb,CAAqB,eAArB,IAAsCC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAX,CAAtC,GAAwF;EAHrG,CADU;EAOfK,QAAQ,EAACN,YAAY,CAACC,OAAb,CAAqB,MAArB,IAA8BC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAA9B,GAAuE;AAPjE,CAAnB;;AAUA,MAAMM,OAAO,GAAC,CAACC,KAAD,EAAOC,MAAP,KAAgB;EAC1B,QAAOA,MAAM,CAACC,IAAd;IACI,KAAK,eAAL;MACIC,OAAO,CAACC,GAAR,CAAYH,MAAM,CAACI,OAAnB;MACA,MAAMC,OAAO,GAACL,MAAM,CAACI,OAArB;MACAF,OAAO,CAACC,GAAR,CAAYE,OAAZ;MACA,IAAIf,SAAS,GAAC,EAAd;MACA,MAAMgB,SAAS,GAACP,KAAK,CAACV,IAAN,CAAWC,SAAX,CAAqBiB,IAArB,CAA0BC,IAAI,IAAEA,IAAI,CAACC,GAAL,KAAWJ,OAAO,CAACI,GAAnD,CAAhB;;MACA,IAAGH,SAAH,EAAc;QACThB,SAAS,GAACS,KAAK,CAACV,IAAN,CAAWC,SAAX,CAAqBoB,GAArB,CAA0BF,IAAD,IAAQ;UACxC,IAAGA,IAAI,CAACC,GAAL,KAAWJ,OAAO,CAACI,GAAtB,EAA2B;YACvB,OAAOD,IAAI,GAACH,OAAZ;UACH,CAFD,MAEK;YACL,OAAOG,IAAP;UACC;QACJ,CANU,CAAV;MAOJ,CARD,MAQK;QACDlB,SAAS,GAAC,CAAC,GAAGS,KAAK,CAACV,IAAN,CAAWC,SAAf,EAAyBe,OAAzB,CAAV;QACAH,OAAO,CAACC,GAAR,CAAYb,SAAZ;MACH;;MACDC,YAAY,CAACoB,OAAb,CAAqB,WAArB,EAAiClB,IAAI,CAACmB,SAAL,CAAetB,SAAf,CAAjC;MACA,OAAO,EAAC,GAAGS,KAAJ;QAAUV,IAAI,EAAC,EAAC,GAAGU,KAAK,CAACV,IAAV;UAAeC;QAAf;MAAf,CAAP;;IACA,KAAK,kBAAL;MAAyB;QACrB,MAAMA,SAAS,GAACS,KAAK,CAACV,IAAN,CAAWC,SAAX,CAAqBuB,MAArB,CAA4BL,IAAI,IAAEA,IAAI,CAACC,GAAL,KAAWT,MAAM,CAACI,OAAP,CAAeK,GAA5D,CAAhB;QACAlB,YAAY,CAACoB,OAAb,CAAqB,WAArB,EAAiClB,IAAI,CAACmB,SAAL,CAAetB,SAAf,CAAjC;QACA,OAAO,EAAC,GAAGS,KAAJ;UAAUV,IAAI,EAAC,EAAC,GAAGU,KAAK,CAACV,IAAV;YAAeC;UAAf;QAAf,CAAP;MACH;;IACD,KAAK,YAAL;MACI;;IACJ,KAAK,WAAL;MACI,OAAO,EAAC,GAAGS,KAAJ;QAAUF,QAAQ,EAACG,MAAM,CAACI;MAA1B,CAAP;;IACJ,KAAK,cAAL;MACI,OAAO,EAAC,GAAGL,KAAJ;QAAUF,QAAQ,EAAC,IAAnB;QAAwBR,IAAI,EAAC;UAACC,SAAS,EAAC,EAAX;UAAcK,eAAe,EAAC,EAA9B;UAAiCC,aAAa,EAAC;QAA/C;MAA7B,CAAP;;IACJ,KAAK,uBAAL;MACI,OAAO,EAAC,GAAGG,KAAJ;QAAUV,IAAI,EAAC,EAAC,GAAGU,KAAK,CAACV,IAAV;UAAeM,eAAe,EAACK,MAAM,CAACI;QAAtC;MAAf,CAAP;;IACJ,KAAK,qBAAL;MACI,OAAO,EAAC,GAAGL,KAAJ;QAAUV,IAAI,EAAC,EAAC,GAAGU,KAAK,CAACV,IAAV;UAAeO,aAAa,EAACI,MAAM,CAACI;QAApC;MAAf,CAAP;;IAGR;MACI,OAAOL,KAAP;EAvCR;AAyCH,CA1CD;;AA6CA,OAAO,MAAMe,aAAa,GAAC,QAAc;EAAA;;EAAA,IAAb;IAACC;EAAD,CAAa;EAC9B,MAAM,CAAChB,KAAD,EAAOiB,QAAP,IAAkB9B,UAAU,CAACY,OAAD,EAASV,YAAT,CAAlC;EACA,MAAM6B,KAAK,GAAC;IAAClB,KAAD;IAAOiB;EAAP,CAAZ;EACP,oBAAO,QAAC,KAAD,CAAO,QAAP;IAAgB,KAAK,EAAEC,KAAvB;IAAA,UAA+BF;EAA/B;IAAA;IAAA;IAAA;EAAA,QAAP;AACH,CAJM;;GAAMD,a;;KAAAA,a"},"metadata":{},"sourceType":"module"}