{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/commerce--main/client/src/pages/ProductScreen.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useReducer, useContext } from 'react';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { Row, Col, ListGroup, ListGroupItem, Card, Badge, Button } from \"react-bootstrap\";\nimport axios from 'axios';\nimport { Rating } from '../components/Rating';\nimport { Loading } from '../components/Loading';\nimport { Message } from '../components/Message';\nimport getError from '../utils';\nimport { Store } from '../Store';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH_REQUEST\":\n      return { ...state,\n        loading: true\n      };\n\n    case \"FETCH_SUCCESS\":\n      return { ...state,\n        loading: false,\n        product: action.payload\n      };\n\n    case \"FETCH_FAIL\":\n      return { ...state,\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const ProductScreen = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [{\n    loading,\n    product,\n    error\n  }, dispatch] = useReducer(reducer, {\n    loading: true,\n    product: {},\n    error: \"\"\n  });\n  const param = useParams();\n  const {\n    id\n  } = param;\n  useEffect(() => {\n    const fetchData = async () => {\n      dispatch({\n        type: \"FETCH_REQUEST\"\n      });\n\n      try {\n        const result = await axios.get(`http://localhost:4000/products/slug/${id}`);\n        dispatch({\n          type: \"FETCH_SUCCESS\",\n          payload: result.data\n        });\n      } catch (err) {\n        dispatch({\n          type: \"FETCH_FAIL\",\n          payload: getError(err)\n        });\n      }\n    };\n\n    fetchData();\n  }, [id]);\n  const {\n    state,\n    dispatch: ctDispatch\n  } = useContext(Store);\n  const {\n    cart\n  } = state;\n\n  const addToCartHandler = async () => {\n    const existItem = cart.cartItems.find(item => item._id === product._id);\n    console.log(existItem);\n    const quantity = existItem ? existItem.quantity + 1 : 1;\n    const {\n      data\n    } = await axios.get(`http://localhost:4000/products/${product._id}`);\n\n    if (data.countInStock < quantity) {\n      window.alert(\"sorry, product is out of stock\");\n    }\n\n    const newItem = { ...product,\n      quantity\n    };\n    console.log(newItem);\n    const newItem1 = { ...product,\n      quantity\n    };\n    console.log(newItem1);\n\n    if (data.countInStock < quantity) {\n      window.alert(\"unfortunately, product is out of stock\");\n      return;\n    }\n\n    ctDispatch({\n      type: \"ADD_CART_ITEM\",\n      payload: newItem\n    });\n    navigate(\"/cart\");\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: loading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 16\n    }, this) : error ? /*#__PURE__*/_jsxDEV(Message, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 35\n    }, this) : /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: 6,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: product.image,\n          alt: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 3,\n        children: /*#__PURE__*/_jsxDEV(ListGroup, {\n          variant: \"flush\",\n          children: [/*#__PURE__*/_jsxDEV(ListGroupItem, {\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n            children: [\"$ \", product.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n            children: /*#__PURE__*/_jsxDEV(Rating, {\n              rating: product.rating,\n              numReviews: product.numRviews\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n            children: [\"Description \", /*#__PURE__*/_jsxDEV(\"p\", {\n              children: product.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 31\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: 3,\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: \"Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: [\"$ \", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              children: \"status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              children: product.countInStock > 0 ? /*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"success\",\n                children: \"In stock\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 47\n              }, this) : /*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"danger\",\n                children: \"Unavaliable\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 84\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-grid\",\n          children: product.countInStock > 0 && /*#__PURE__*/_jsxDEV(Button, {\n            onClick: addToCartHandler,\n            children: \"Add To Cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductScreen, \"XWJJ5CEilQ6bkrSw1nOGY3S3xds=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = ProductScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductScreen\");","map":{"version":3,"names":["React","useEffect","useReducer","useContext","useNavigate","useParams","Row","Col","ListGroup","ListGroupItem","Card","Badge","Button","axios","Rating","Loading","Message","getError","Store","reducer","state","action","type","loading","product","payload","error","ProductScreen","navigate","dispatch","param","id","fetchData","result","get","data","err","ctDispatch","cart","addToCartHandler","existItem","cartItems","find","item","_id","console","log","quantity","countInStock","window","alert","newItem","newItem1","image","name","price","rating","numRviews","description"],"sources":["/home/user/Desktop/commerce--main/client/src/pages/ProductScreen.js"],"sourcesContent":["import React,{useEffect, useReducer,useContext} from 'react'\r\nimport {useNavigate, useParams} from \"react-router-dom\";\r\nimport {Row,Col, ListGroup, ListGroupItem,Card,Badge, Button} from \"react-bootstrap\"\r\nimport axios from 'axios';\r\nimport { Rating } from '../components/Rating';\r\nimport { Loading } from '../components/Loading';\r\nimport { Message } from '../components/Message';\r\nimport getError from '../utils';\r\nimport { Store } from '../Store';\r\n\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"FETCH_REQUEST\":\r\n      return { ...state, loading: true };\r\n    case \"FETCH_SUCCESS\":\r\n      return { ...state, loading: false, product: action.payload };\r\n    case \"FETCH_FAIL\":\r\n      return { ...state, loading: false, error: action.payload };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport const ProductScreen = () => {\r\n  const navigate=useNavigate()\r\n  const [{loading,product,error},dispatch]=useReducer(reducer,{\r\n    loading:true,\r\n    product:{},\r\n    error:\"\"\r\n  })\r\n  const param=useParams();\r\n  const {id}=param;\r\n  useEffect(()=>{\r\n    const fetchData=async()=>{\r\n      dispatch({type:\"FETCH_REQUEST\"})\r\n      try {\r\n        const result=await axios.get(`http://localhost:4000/products/slug/${id}`)\r\n        dispatch({type:\"FETCH_SUCCESS\",payload:result.data})\r\n      }catch(err) {\r\n          dispatch({type:\"FETCH_FAIL\",payload:getError(err)})\r\n      }\r\n      \r\n    }\r\n    fetchData();\r\n  },[id])\r\n\r\n  const {state,dispatch:ctDispatch}=useContext(Store);\r\n  const {cart}=state;\r\n\r\n\r\n  const addToCartHandler=async()=>{\r\n    const existItem=cart.cartItems.find(item=>item._id===product._id);\r\n    console.log(existItem);\r\n    const quantity=existItem? existItem.quantity+1:1;\r\n    const {data}=await axios.get(`http://localhost:4000/products/${product._id}`);\r\n    if(data.countInStock<quantity) {\r\n      window.alert(\"sorry, product is out of stock\")\r\n    }\r\n    const newItem={...product,quantity};\r\n    console.log(newItem);\r\n    const newItem1={...product,quantity};\r\n    console.log(newItem1)\r\n   \r\n    \r\n    if(data.countInStock<quantity) {\r\n      window.alert(\"unfortunately, product is out of stock\")\r\n      return;\r\n    }\r\n    ctDispatch({type:\"ADD_CART_ITEM\",payload:newItem});\r\n    navigate(\"/cart\")\r\n   \r\n  \r\n  }\r\n  return (\r\n    <div>\r\n     {loading? <Loading/>: error? <Message variant=\"danger\">{error}</Message>:\r\n\r\n        <Row>\r\n          <Col md={6}>\r\n            <img src={product.image} alt={product.name}/>\r\n          </Col>\r\n          <Col md={3}>\r\n            <ListGroup variant=\"flush\">\r\n                <ListGroupItem>\r\n                  <h1>{product.name}</h1>\r\n                </ListGroupItem>\r\n                <ListGroupItem>\r\n                 $ {product.price}\r\n                </ListGroupItem>\r\n                <ListGroupItem>\r\n                  <Rating rating={product.rating} numReviews={product.numRviews}/>\r\n                </ListGroupItem>\r\n                <ListGroupItem>\r\n                  Description <p>{product.description}</p>\r\n                </ListGroupItem>\r\n            </ListGroup>\r\n          </Col>\r\n          <Col md={3}>\r\n            <Card>\r\n              <Row>\r\n                <Col>Price</Col>\r\n                <Col>$ {product.price}</Col>\r\n              </Row>\r\n              <Row>\r\n                <Col>status</Col>\r\n                <Col>{product.countInStock>0? <Badge bg=\"success\">In stock</Badge>:<Badge bg=\"danger\">Unavaliable</Badge>}</Col>\r\n              </Row>\r\n            </Card>\r\n            <div className=\"d-grid\">\r\n            {product.countInStock>0 && <Button onClick={addToCartHandler} >Add To Cart</Button>}\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n\r\n     }\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAyBC,UAAzB,EAAoCC,UAApC,QAAqD,OAArD;AACA,SAAQC,WAAR,EAAqBC,SAArB,QAAqC,kBAArC;AACA,SAAQC,GAAR,EAAYC,GAAZ,EAAiBC,SAAjB,EAA4BC,aAA5B,EAA0CC,IAA1C,EAA+CC,KAA/C,EAAsDC,MAAtD,QAAmE,iBAAnE;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,MAAT,QAAuB,sBAAvB;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,SAASC,OAAT,QAAwB,uBAAxB;AACA,OAAOC,QAAP,MAAqB,UAArB;AACA,SAASC,KAAT,QAAsB,UAAtB;;;AAGA,MAAMC,OAAO,GAAG,CAACC,KAAD,EAAQC,MAAR,KAAmB;EACjC,QAAQA,MAAM,CAACC,IAAf;IACE,KAAK,eAAL;MACE,OAAO,EAAE,GAAGF,KAAL;QAAYG,OAAO,EAAE;MAArB,CAAP;;IACF,KAAK,eAAL;MACE,OAAO,EAAE,GAAGH,KAAL;QAAYG,OAAO,EAAE,KAArB;QAA4BC,OAAO,EAAEH,MAAM,CAACI;MAA5C,CAAP;;IACF,KAAK,YAAL;MACE,OAAO,EAAE,GAAGL,KAAL;QAAYG,OAAO,EAAE,KAArB;QAA4BG,KAAK,EAAEL,MAAM,CAACI;MAA1C,CAAP;;IACF;MACE,OAAOL,KAAP;EARJ;AAUD,CAXD;;AAaA,OAAO,MAAMO,aAAa,GAAG,MAAM;EAAA;;EACjC,MAAMC,QAAQ,GAACxB,WAAW,EAA1B;EACA,MAAM,CAAC;IAACmB,OAAD;IAASC,OAAT;IAAiBE;EAAjB,CAAD,EAAyBG,QAAzB,IAAmC3B,UAAU,CAACiB,OAAD,EAAS;IAC1DI,OAAO,EAAC,IADkD;IAE1DC,OAAO,EAAC,EAFkD;IAG1DE,KAAK,EAAC;EAHoD,CAAT,CAAnD;EAKA,MAAMI,KAAK,GAACzB,SAAS,EAArB;EACA,MAAM;IAAC0B;EAAD,IAAKD,KAAX;EACA7B,SAAS,CAAC,MAAI;IACZ,MAAM+B,SAAS,GAAC,YAAS;MACvBH,QAAQ,CAAC;QAACP,IAAI,EAAC;MAAN,CAAD,CAAR;;MACA,IAAI;QACF,MAAMW,MAAM,GAAC,MAAMpB,KAAK,CAACqB,GAAN,CAAW,uCAAsCH,EAAG,EAApD,CAAnB;QACAF,QAAQ,CAAC;UAACP,IAAI,EAAC,eAAN;UAAsBG,OAAO,EAACQ,MAAM,CAACE;QAArC,CAAD,CAAR;MACD,CAHD,CAGC,OAAMC,GAAN,EAAW;QACRP,QAAQ,CAAC;UAACP,IAAI,EAAC,YAAN;UAAmBG,OAAO,EAACR,QAAQ,CAACmB,GAAD;QAAnC,CAAD,CAAR;MACH;IAEF,CATD;;IAUAJ,SAAS;EACV,CAZQ,EAYP,CAACD,EAAD,CAZO,CAAT;EAcA,MAAM;IAACX,KAAD;IAAOS,QAAQ,EAACQ;EAAhB,IAA4BlC,UAAU,CAACe,KAAD,CAA5C;EACA,MAAM;IAACoB;EAAD,IAAOlB,KAAb;;EAGA,MAAMmB,gBAAgB,GAAC,YAAS;IAC9B,MAAMC,SAAS,GAACF,IAAI,CAACG,SAAL,CAAeC,IAAf,CAAoBC,IAAI,IAAEA,IAAI,CAACC,GAAL,KAAWpB,OAAO,CAACoB,GAA7C,CAAhB;IACAC,OAAO,CAACC,GAAR,CAAYN,SAAZ;IACA,MAAMO,QAAQ,GAACP,SAAS,GAAEA,SAAS,CAACO,QAAV,GAAmB,CAArB,GAAuB,CAA/C;IACA,MAAM;MAACZ;IAAD,IAAO,MAAMtB,KAAK,CAACqB,GAAN,CAAW,kCAAiCV,OAAO,CAACoB,GAAI,EAAxD,CAAnB;;IACA,IAAGT,IAAI,CAACa,YAAL,GAAkBD,QAArB,EAA+B;MAC7BE,MAAM,CAACC,KAAP,CAAa,gCAAb;IACD;;IACD,MAAMC,OAAO,GAAC,EAAC,GAAG3B,OAAJ;MAAYuB;IAAZ,CAAd;IACAF,OAAO,CAACC,GAAR,CAAYK,OAAZ;IACA,MAAMC,QAAQ,GAAC,EAAC,GAAG5B,OAAJ;MAAYuB;IAAZ,CAAf;IACAF,OAAO,CAACC,GAAR,CAAYM,QAAZ;;IAGA,IAAGjB,IAAI,CAACa,YAAL,GAAkBD,QAArB,EAA+B;MAC7BE,MAAM,CAACC,KAAP,CAAa,wCAAb;MACA;IACD;;IACDb,UAAU,CAAC;MAACf,IAAI,EAAC,eAAN;MAAsBG,OAAO,EAAC0B;IAA9B,CAAD,CAAV;IACAvB,QAAQ,CAAC,OAAD,CAAR;EAGD,CAtBD;;EAuBA,oBACE;IAAA,UACEL,OAAO,gBAAE,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,QAAF,GAAcG,KAAK,gBAAE,QAAC,OAAD;MAAS,OAAO,EAAC,QAAjB;MAAA,UAA2BA;IAA3B;MAAA;MAAA;MAAA;IAAA,QAAF,gBAExB,QAAC,GAAD;MAAA,wBACE,QAAC,GAAD;QAAK,EAAE,EAAE,CAAT;QAAA,uBACE;UAAK,GAAG,EAAEF,OAAO,CAAC6B,KAAlB;UAAyB,GAAG,EAAE7B,OAAO,CAAC8B;QAAtC;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QADF,eAIE,QAAC,GAAD;QAAK,EAAE,EAAE,CAAT;QAAA,uBACE,QAAC,SAAD;UAAW,OAAO,EAAC,OAAnB;UAAA,wBACI,QAAC,aAAD;YAAA,uBACE;cAAA,UAAK9B,OAAO,CAAC8B;YAAb;cAAA;cAAA;cAAA;YAAA;UADF;YAAA;YAAA;YAAA;UAAA,QADJ,eAII,QAAC,aAAD;YAAA,iBACI9B,OAAO,CAAC+B,KADZ;UAAA;YAAA;YAAA;YAAA;UAAA,QAJJ,eAOI,QAAC,aAAD;YAAA,uBACE,QAAC,MAAD;cAAQ,MAAM,EAAE/B,OAAO,CAACgC,MAAxB;cAAgC,UAAU,EAAEhC,OAAO,CAACiC;YAApD;cAAA;cAAA;cAAA;YAAA;UADF;YAAA;YAAA;YAAA;UAAA,QAPJ,eAUI,QAAC,aAAD;YAAA,wCACc;cAAA,UAAIjC,OAAO,CAACkC;YAAZ;cAAA;cAAA;cAAA;YAAA,QADd;UAAA;YAAA;YAAA;YAAA;UAAA,QAVJ;QAAA;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QAJF,eAoBE,QAAC,GAAD;QAAK,EAAE,EAAE,CAAT;QAAA,wBACE,QAAC,IAAD;UAAA,wBACE,QAAC,GAAD;YAAA,wBACE,QAAC,GAAD;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA,QADF,eAEE,QAAC,GAAD;cAAA,iBAAQlC,OAAO,CAAC+B,KAAhB;YAAA;cAAA;cAAA;cAAA;YAAA,QAFF;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAKE,QAAC,GAAD;YAAA,wBACE,QAAC,GAAD;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA,QADF,eAEE,QAAC,GAAD;cAAA,UAAM/B,OAAO,CAACwB,YAAR,GAAqB,CAArB,gBAAwB,QAAC,KAAD;gBAAO,EAAE,EAAC,SAAV;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QAAxB,gBAA6D,QAAC,KAAD;gBAAO,EAAE,EAAC,QAAV;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA;YAAnE;cAAA;cAAA;cAAA;YAAA,QAFF;UAAA;YAAA;YAAA;YAAA;UAAA,QALF;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,eAWE;UAAK,SAAS,EAAC,QAAf;UAAA,UACCxB,OAAO,CAACwB,YAAR,GAAqB,CAArB,iBAA0B,QAAC,MAAD;YAAQ,OAAO,EAAET,gBAAjB;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAD3B;UAAA;UAAA;UAAA;QAAA,QAXF;MAAA;QAAA;QAAA;QAAA;MAAA,QApBF;IAAA;MAAA;MAAA;MAAA;IAAA;EAHJ;IAAA;IAAA;IAAA;EAAA,QADF;AA4CD,CA9FM;;GAAMZ,a;UACIvB,W,EAMHC,S;;;KAPDsB,a"},"metadata":{},"sourceType":"module"}