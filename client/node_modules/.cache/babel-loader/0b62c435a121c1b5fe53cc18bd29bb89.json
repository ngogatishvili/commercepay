{"ast":null,"code":"var _jsxFileName = \"/home/user/Desktop/commerce--main/client/src/components/Product.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext } from 'react';\nimport { Button, Card } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport { Rating } from './Rating';\nimport { Store } from '../Store';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Product = _ref => {\n  _s();\n\n  let {\n    product\n  } = _ref;\n  const {\n    state: {\n      cart\n    },\n    dispatch: cxtDispatch\n  } = useContext(Store);\n  const {\n    cartItems\n  } = cart;\n\n  const addToCartHandler = async item => {\n    const existItem = cartItems.find(product => product._id === item._id);\n    const quantity = existItem ? existItem.quantity + 1 : 1;\n    const {\n      data\n    } = await axios.get(`http://localhost:4000/products/${item._id}`);\n\n    if (data.countInStock < quantity) {\n      window.alert(\"Sorry, product is out of stock\");\n      return;\n    }\n\n    cxtDispatch({\n      type: \"ADD_CART_ITEM\",\n      payload: { ...item,\n        quantity\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"product mb-3\",\n    children: /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/products/${product.slug}`,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: product.image,\n          alt: product.name,\n          className: \"card-img-top\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: `/products/${product.slug}`,\n        children: /*#__PURE__*/_jsxDEV(Card.Title, {\n          children: product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Rating, {\n        rating: product.rating,\n        numReviews: product.numReviews\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n        children: [\"$ \", product.price]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 9\n      }, this), product.countInStock === 0 ? /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        variant: \"primary\",\n        children: \"Out of stock\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 37\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => addToCartHandler(product),\n        children: \"Add to Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 95\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Product, \"GKWUgp6inhiEo3jjIyyyoZqyXz8=\");\n\n_c = Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"names":["React","useContext","Button","Card","Link","Rating","Store","axios","Product","product","state","cart","dispatch","cxtDispatch","cartItems","addToCartHandler","item","existItem","find","_id","quantity","data","get","countInStock","window","alert","type","payload","slug","image","name","rating","numReviews","price"],"sources":["/home/user/Desktop/commerce--main/client/src/components/Product.js"],"sourcesContent":["import React,{useContext} from 'react'\r\nimport {Button, Card} from \"react-bootstrap\"\r\nimport {Link} from \"react-router-dom\"\r\nimport { Rating } from './Rating'\r\nimport { Store } from '../Store'\r\nimport axios from 'axios'\r\n\r\nexport const Product = ({product}) => {\r\n  const {state:{cart},dispatch:cxtDispatch}=useContext(Store);\r\n  const {cartItems}=cart;\r\n  const addToCartHandler=async(item)=>{\r\n    const existItem=cartItems.find(product=>product._id===item._id);\r\n    const quantity=existItem? existItem.quantity+1:1;\r\n    const {data}=await axios.get(`http://localhost:4000/products/${item._id}`);\r\n    if(data.countInStock<quantity) {\r\n      window.alert(\"Sorry, product is out of stock\");\r\n      return;\r\n    }\r\n    cxtDispatch({type:\"ADD_CART_ITEM\",payload:{...item,quantity}})\r\n\r\n  }\r\n  return (\r\n    <div className=\"product mb-3\">\r\n        <Card>\r\n        <Link to={`/products/${product.slug}`}>\r\n        <img src={product.image} alt={product.name} className=\"card-img-top\"/>\r\n        </Link>\r\n        <Link to={`/products/${product.slug}`}>\r\n        <Card.Title>{product.name}</Card.Title>\r\n        </Link>\r\n        <Rating rating={product.rating} numReviews={product.numReviews}/>\r\n        <Card.Text>$ {product.price}</Card.Text>\r\n        {product.countInStock===0 ? <Button disabled variant=\"primary\">Out of stock</Button>: <Button onClick={()=>addToCartHandler(product)}>Add to Cart</Button>}\r\n       \r\n        \r\n        \r\n    </Card>\r\n    </div>\r\n    \r\n  )\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,UAAd,QAA+B,OAA/B;AACA,SAAQC,MAAR,EAAgBC,IAAhB,QAA2B,iBAA3B;AACA,SAAQC,IAAR,QAAmB,kBAAnB;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,SAASC,KAAT,QAAsB,UAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,OAAO,MAAMC,OAAO,GAAG,QAAe;EAAA;;EAAA,IAAd;IAACC;EAAD,CAAc;EACpC,MAAM;IAACC,KAAK,EAAC;MAACC;IAAD,CAAP;IAAcC,QAAQ,EAACC;EAAvB,IAAoCZ,UAAU,CAACK,KAAD,CAApD;EACA,MAAM;IAACQ;EAAD,IAAYH,IAAlB;;EACA,MAAMI,gBAAgB,GAAC,MAAMC,IAAN,IAAa;IAClC,MAAMC,SAAS,GAACH,SAAS,CAACI,IAAV,CAAeT,OAAO,IAAEA,OAAO,CAACU,GAAR,KAAcH,IAAI,CAACG,GAA3C,CAAhB;IACA,MAAMC,QAAQ,GAACH,SAAS,GAAEA,SAAS,CAACG,QAAV,GAAmB,CAArB,GAAuB,CAA/C;IACA,MAAM;MAACC;IAAD,IAAO,MAAMd,KAAK,CAACe,GAAN,CAAW,kCAAiCN,IAAI,CAACG,GAAI,EAArD,CAAnB;;IACA,IAAGE,IAAI,CAACE,YAAL,GAAkBH,QAArB,EAA+B;MAC7BI,MAAM,CAACC,KAAP,CAAa,gCAAb;MACA;IACD;;IACDZ,WAAW,CAAC;MAACa,IAAI,EAAC,eAAN;MAAsBC,OAAO,EAAC,EAAC,GAAGX,IAAJ;QAASI;MAAT;IAA9B,CAAD,CAAX;EAED,CAVD;;EAWA,oBACE;IAAK,SAAS,EAAC,cAAf;IAAA,uBACI,QAAC,IAAD;MAAA,wBACA,QAAC,IAAD;QAAM,EAAE,EAAG,aAAYX,OAAO,CAACmB,IAAK,EAApC;QAAA,uBACA;UAAK,GAAG,EAAEnB,OAAO,CAACoB,KAAlB;UAAyB,GAAG,EAAEpB,OAAO,CAACqB,IAAtC;UAA4C,SAAS,EAAC;QAAtD;UAAA;UAAA;UAAA;QAAA;MADA;QAAA;QAAA;QAAA;MAAA,QADA,eAIA,QAAC,IAAD;QAAM,EAAE,EAAG,aAAYrB,OAAO,CAACmB,IAAK,EAApC;QAAA,uBACA,QAAC,IAAD,CAAM,KAAN;UAAA,UAAanB,OAAO,CAACqB;QAArB;UAAA;UAAA;UAAA;QAAA;MADA;QAAA;QAAA;QAAA;MAAA,QAJA,eAOA,QAAC,MAAD;QAAQ,MAAM,EAAErB,OAAO,CAACsB,MAAxB;QAAgC,UAAU,EAAEtB,OAAO,CAACuB;MAApD;QAAA;QAAA;QAAA;MAAA,QAPA,eAQA,QAAC,IAAD,CAAM,IAAN;QAAA,iBAAcvB,OAAO,CAACwB,KAAtB;MAAA;QAAA;QAAA;QAAA;MAAA,QARA,EASCxB,OAAO,CAACc,YAAR,KAAuB,CAAvB,gBAA2B,QAAC,MAAD;QAAQ,QAAQ,MAAhB;QAAiB,OAAO,EAAC,SAAzB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAA3B,gBAAqF,QAAC,MAAD;QAAQ,OAAO,EAAE,MAAIR,gBAAgB,CAACN,OAAD,CAArC;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QATtF;IAAA;MAAA;MAAA;MAAA;IAAA;EADJ;IAAA;IAAA;IAAA;EAAA,QADF;AAmBD,CAjCM;;GAAMD,O;;KAAAA,O"},"metadata":{},"sourceType":"module"}